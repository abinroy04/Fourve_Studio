{% extends "esports/base_esports.html" %}

{% block title %}Fourve E-Sports{% endblock %}

{% block content %}

    <!-- Hero Carousel Section -->
    <section x-data="{
        activeSlide: 0,
        slides: [
            { 
                image: 'https://images.unsplash.com/photo-1542751371-adc38448a05e?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80',
                title: 'Welcome to Fourve E-Sports',
                description: 'Your ultimate destination for competitive gaming, tournaments, and e-sports community.'
            },
            {
                image: 'https://images.unsplash.com/photo-1552820728-8b83bb6b773f?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80',
                title: 'Join Exclusive Tournaments',
                description: 'Compete with the best players around the world and win exciting prizes.'
            },
            {
                image: 'https://images.unsplash.com/photo-1592155931584-901ac15763e3?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80',
                title: 'Play your Favorite Games',
                description: 'Explore a wide range of games and join our exciting tournaments.'
            }
        ],
        autoplayInterval: null,
        isAutoPlaying: true,
        startAutoplay() {
            if (!this.isAutoPlaying) return;
            this.autoplayInterval = setInterval(() => {
                this.next();
            }, 3000);
        },
        stopAutoplay() {
            clearInterval(this.autoplayInterval);
        },
        prev() {
            this.activeSlide = this.activeSlide === 0 ? this.slides.length - 1 : this.activeSlide - 1;
        },
        next() {
            this.activeSlide = this.activeSlide === this.slides.length - 1 ? 0 : this.activeSlide + 1;
        },
        init() {
            this.startAutoplay();
            
            // Stop autoplay when user interacts with the carousel
            this.$watch('activeSlide', () => {
                this.stopAutoplay();
                setTimeout(() => this.startAutoplay(), 5000);
            });
        }
    }" 
    class="relative bg-gray-800 shadow overflow-hidden mb-6 w-full">
        <!-- Carousel content -->
        <div class="relative h-96 md:h-[32rem] lg:h-[40rem]">
            <template x-for="(slide, index) in slides" :key="index">
                <div x-show="activeSlide === index" 
                     class="carousel-item absolute inset-0 w-full h-full"
                     x-transition:enter="transition ease-out duration-300"
                     x-transition:enter-start="opacity-0"
                     x-transition:enter-end="opacity-100"
                     x-transition:leave="transition ease-in duration-300"
                     x-transition:leave-start="opacity-100"
                     x-transition:leave-end="opacity-0">
                    <img :src="slide.image" class="absolute inset-0 w-full h-full object-cover opacity-50" alt="">
                    <div class="absolute inset-0 bg-gradient-to-t from-gray-900 via-gray-900/70 to-transparent">
                        <div class="absolute bottom-0 left-0 p-6 md:p-10 container mx-auto">
                            <h2 class="text-2xl md:text-3xl font-semibold text-purple-400 mb-2" x-text="slide.title"></h2>
                            <p class="text-gray-300 max-w-md mb-4" x-text="slide.description"></p>
                            <button class="bg-purple-600 rounded-tl-full rounded-br-full text-white font-medium px-6 py-2 hover:bg-purple-700 w-fit btn-glow">
                                Join Now
                            </button>
                        </div>
                    </div>
                </div>
            </template>
        </div>
        
        <!-- Carousel controls -->
        <div class="absolute inset-y-0 left-0 flex items-center">
            <button @click="prev()" class="p-2 ml-4 bg-black/50 hover:bg-black/70 text-white rounded-full focus:outline-none">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                </svg>
            </button>
        </div>
        
        <div class="absolute inset-y-0 right-0 flex items-center">
            <button @click="next()" class="p-2 mr-4 bg-black/50 hover:bg-black/70 text-white rounded-full focus:outline-none">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                </svg>
            </button>
        </div>
        
        <!-- Carousel indicators -->
        <div class="absolute bottom-0 w-full flex justify-center p-2">
            <div class="flex space-x-2">
                <template x-for="(slide, index) in slides" :key="index">
                    <button @click="activeSlide = index" :class="{ 'w-8 bg-purple-500': activeSlide === index, 'w-4 bg-gray-400': activeSlide !== index }" 
                        class="h-2 rounded transition-all duration-300 focus:outline-none"></button>
                </template>
            </div>
        </div>
    </section>

    <main class="container mx-auto px-4 py-8">
        <!-- Section Title -->
        <div id="tournaments" class="container section-title" data-aos="fade-up">
            <h2>Games</h2>
            <p class="max-w-2xl mx-auto text-gray-300 mt-4">Competitive tournaments and scrims await you to take your gaming to the next level.</p>
        </div>
        
        <!-- Game Banners - Two Column Layout -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-8">
          {%for game in games %}
            <!-- Game Banner -->            <div class="relative overflow-hidden rounded-lg shadow-lg group game-card">
                <img src="{{ game.Image }}" 
                     alt="{{ game.Game }}" class="w-full h-64 object-cover">
                <div class="absolute inset-0 bg-black bg-opacity-60 transition-opacity group-hover:bg-opacity-40 flex flex-col justify-end p-6">
                    <h3 class="text-2xl font-bold text-white">{{game.Game}}</h3>
                    <p class="text-gray-200 mb-4">{{game.Description}}</p>
                    <div class="flex space-x-4">
                        <a href="{{ url_for('game_detail', game_id=game['Game-id']) }}" class="bg-purple-600 rounded-tl-full rounded-br-full text-white font-medium px-6 py-2 hover:bg-purple-700 w-fit btn-glow">
                            Details
                        </a>
                    </div>
                </div>
            </div>
          {%endfor%}
        </div>
    </main>{% endblock %}